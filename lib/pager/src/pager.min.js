"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils")),_conf=_interopRequireDefault(require("../../conf"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _default2={name:"VxePager",props:{size:{type:String,default:function(){return _conf.default.pager.size||_conf.default.size}},layouts:{type:Array,default:function(){return _conf.default.pager.layouts||["PrevJump","PrevPage","Jump","PageCount","NextPage","NextJump","Sizes","Total"]}},currentPage:{type:Number,default:1},loading:Boolean,pageSize:{type:Number,default:function(){return _conf.default.pager.pageSize||10}},total:{type:Number,default:0},pagerCount:{type:Number,default:function(){return _conf.default.pager.pagerCount||7}},pageSizes:{type:Array,default:function(){return _conf.default.pager.pageSizes||[10,15,20,50,100]}},align:{type:String,default:function(){return _conf.default.pager.align}},border:{type:Boolean,default:function(){return _conf.default.pager.border}},background:{type:Boolean,default:function(){return _conf.default.pager.background}},perfect:{type:Boolean,default:function(){return _conf.default.pager.perfect}},autoHidden:{type:Boolean,default:function(){return _conf.default.pager.autoHidden}},iconPrevPage:String,iconJumpPrev:String,iconJumpNext:String,iconNextPage:String,iconJumpMore:String,id:{type:String,default:""}},data:function(){return{inputPage:""}},inject:{$xegrid:{default:null}},mounted:function(){var e=this.$props.id||window.location.href,e=localStorage.getItem("".concat(e,"_pageSize"));e&&this.changePageSize(parseInt(e,10))},computed:{vSize:function(){return this.size||this.$parent.size||this.$parent.vSize},isSizes:function(){return this.layouts.some(function(e){return"Sizes"===e})},pageCount:function(){return this.getPageCount(this.total,this.pageSize)},numList:function(){for(var e=this.pageCount>this.pagerCount?this.pagerCount-2:this.pagerCount,t=[],n=0;n<e;n++)t.push(n);return t},offsetNumber:function(){return Math.floor((this.pagerCount-2)/2)}},render:function(t){var n=this,e=this.$scopedSlots,r=this.$xegrid,a=this.vSize,i=this.align,u=[];return e.left&&u.push(t("span",{class:"vxe-pager--left-wrapper"},e.left.call(this,{$grid:r}))),this.layouts.forEach(function(e){u.push(n["render".concat(e)](t))}),e.right&&u.push(t("span",{class:"vxe-pager--right-wrapper"},e.right.call(this,{$grid:r}))),t("div",{class:["vxe-pager",(_defineProperty(r={},"size--".concat(a),a),_defineProperty(r,"align--".concat(i),i),_defineProperty(r,"is--border",this.border),_defineProperty(r,"is--background",this.background),_defineProperty(r,"is--perfect",this.perfect),_defineProperty(r,"is--hidden",this.autoHidden&&1===this.pageCount),_defineProperty(r,"is--loading",this.loading),r)]},[t("div",{class:"vxe-pager--wrapper"},u)])},methods:{renderPrevPage:function(e){return e("span",{class:["vxe-pager--prev-btn",{"is--disabled":this.currentPage<=1}],attrs:{title:_conf.default.i18n("vxe.pager.prevPage")},on:{click:this.prevPage}},[e("i",{class:["vxe-pager--btn-icon",this.iconPrevPage||_conf.default.icon.PAGER_PREV_PAGE],domProps:{innerHTML:'<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">\n              <g id="icon/-箭头/左" stroke="none" stroke-width="1" fill-rule="evenodd">\n                <path d="M11.2549849,16.5 C11.5241692,16.5 11.7734139,16.384984 11.9628399,16.1932907 L19.2208459,9.05271565 C19.4003021,8.88019169 19.5,8.65974441 19.5,8.41054313 C19.5,7.89297125 19.0912387,7.5 18.5528701,7.5 C18.3036254,7.5 18.0543807,7.59584665 17.8749245,7.76837061 L11.2549849,14.2859425 L4.62507553,7.76837061 C4.44561934,7.59584665 4.2163142,7.5 3.94712991,7.5 C3.41873112,7.5 3,7.89297125 3,8.41054313 C3,8.65974441 3.09969789,8.88019169 3.27915408,9.05271565 L10.5371601,16.1932907 C10.7465257,16.3945687 10.9758308,16.5 11.2549849,16.5 Z" id="1" fill-rule="nonzero" transform="translate(11.250000, 12.000000) scale(-1, 1) rotate(-90.000000) translate(-11.250000, -12.000000) "></path>\n              </g>\n            </svg>'}})])},renderPrevJump:function(e,t){return e(t||"span",{class:["vxe-pager--jump-prev",{"is--fixed":!t,"is--disabled":this.currentPage<=1}],attrs:{title:_conf.default.i18n("vxe.pager.prevJump")},on:{click:this.prevJump}},[t?e("i",{class:["vxe-pager--jump-more-icon",this.iconJumpMore||_conf.default.icon.PAGER_JUMP_MORE],domProps:{innerHTML:'<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">\n              <g id="页面-2" stroke="none" stroke-width="1" fill-rule="evenodd">\n                <path d="M12,16.5 C12.8284271,16.5 13.5,17.1715729 13.5,18 C13.5,18.8284271 12.8284271,19.5 12,19.5 C11.1715729,19.5 10.5,18.8284271 10.5,18 C10.5,17.1715729 11.1715729,16.5 12,16.5 Z M12,10.5 C12.8284271,10.5 13.5,11.1715729 13.5,12 C13.5,12.8284271 12.8284271,13.5 12,13.5 C11.1715729,13.5 10.5,12.8284271 10.5,12 C10.5,11.1715729 11.1715729,10.5 12,10.5 Z M12,4.5 C12.8284271,4.5 13.5,5.17157288 13.5,6 C13.5,6.82842712 12.8284271,7.5 12,7.5 C11.1715729,7.5 10.5,6.82842712 10.5,6 C10.5,5.17157288 11.1715729,4.5 12,4.5 Z" id="形状结合" transform="translate(12.000000, 12.000000) rotate(-270.000000) translate(-12.000000, -12.000000) "></path>\n              </g>\n            </svg>'}}):null])},renderNumber:function(e){return e("ul",{class:"vxe-pager--btn-wrapper"},this.renderPageBtn(e))},renderJumpNumber:function(e){return e("ul",{class:"vxe-pager--btn-wrapper"},this.renderPageBtn(e,!0))},renderNextJump:function(e,t){return e(t||"span",{class:["vxe-pager--jump-next",{"is--fixed":!t,"is--disabled":this.currentPage>=this.pageCount}],attrs:{title:_conf.default.i18n("vxe.pager.nextJump")},on:{click:this.nextJump}},[t?e("i",{class:["vxe-pager--jump-more-icon",this.iconJumpMore||_conf.default.icon.PAGER_JUMP_MORE],domProps:{innerHTML:'<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">\n              <g id="页面-2" stroke="none" stroke-width="1" fill-rule="evenodd">\n                <path d="M12,16.5 C12.8284271,16.5 13.5,17.1715729 13.5,18 C13.5,18.8284271 12.8284271,19.5 12,19.5 C11.1715729,19.5 10.5,18.8284271 10.5,18 C10.5,17.1715729 11.1715729,16.5 12,16.5 Z M12,10.5 C12.8284271,10.5 13.5,11.1715729 13.5,12 C13.5,12.8284271 12.8284271,13.5 12,13.5 C11.1715729,13.5 10.5,12.8284271 10.5,12 C10.5,11.1715729 11.1715729,10.5 12,10.5 Z M12,4.5 C12.8284271,4.5 13.5,5.17157288 13.5,6 C13.5,6.82842712 12.8284271,7.5 12,7.5 C11.1715729,7.5 10.5,6.82842712 10.5,6 C10.5,5.17157288 11.1715729,4.5 12,4.5 Z" id="形状结合" transform="translate(12.000000, 12.000000) rotate(-270.000000) translate(-12.000000, -12.000000) "></path>\n              </g>\n            </svg>'}}):null])},renderNextPage:function(e){return e("span",{class:["vxe-pager--next-btn",{"is--disabled":this.currentPage>=this.pageCount}],attrs:{title:_conf.default.i18n("vxe.pager.nextPage")},on:{click:this.nextPage}},[e("i",{class:["vxe-pager--btn-icon",this.iconNextPage||_conf.default.icon.PAGER_NEXT_PAGE],domProps:{innerHTML:'<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg">\n              <g id="icon/-箭头/左" stroke="none" stroke-width="1" fill-rule="evenodd">\n                <path d="M11.2549849,16.5 C11.5241692,16.5 11.7734139,16.384984 11.9628399,16.1932907 L19.2208459,9.05271565 C19.4003021,8.88019169 19.5,8.65974441 19.5,8.41054313 C19.5,7.89297125 19.0912387,7.5 18.5528701,7.5 C18.3036254,7.5 18.0543807,7.59584665 17.8749245,7.76837061 L11.2549849,14.2859425 L4.62507553,7.76837061 C4.44561934,7.59584665 4.2163142,7.5 3.94712991,7.5 C3.41873112,7.5 3,7.89297125 3,8.41054313 C3,8.65974441 3.09969789,8.88019169 3.27915408,9.05271565 L10.5371601,16.1932907 C10.7465257,16.3945687 10.9758308,16.5 11.2549849,16.5 Z" id="1" fill-rule="nonzero" transform="translate(11.250000, 12.000000) scale(-1, 1) rotate(-90.000000) translate(-11.250000, -12.000000) "></path>\n              </g>\n            </svg>'}})])},renderSizes:function(e){var t=this;return e("vxe-select",{class:"vxe-pager--sizes",props:{value:this.pageSize,placement:"top",options:this.pageSizes.map(function(e){return{value:e,label:"".concat(_xeUtils.default.template(_conf.default.i18n("vxe.pager.pagesize"),[e]))}})},on:{change:function(e){e=e.value;t.pageSizeEvent(e)}}})},renderFullJump:function(e){return this.renderJump(e,!0)},renderJump:function(e,t){return e("span",{class:"vxe-pager--jump"},[t?e("span",{class:"vxe-pager--goto-text"},_conf.default.i18n("vxe.pager.goto")):null,e("input",{class:"vxe-pager--goto",domProps:{value:this.inputPage},attrs:{type:"text",autocomplete:"off"},on:{keydown:this.jumpKeydownEvent,blur:this.triggerJumpEvent}}),t?e("span",{class:"vxe-pager--classifier-text"},_conf.default.i18n("vxe.pager.pageClassifier")):null])},renderPageCount:function(e){return e("span",{class:"vxe-pager--count"},[e("span",{class:"vxe-pager--separator"}),e("span",this.pageCount)])},renderTotal:function(e){return e("span",{class:"vxe-pager--total"},_xeUtils.default.template(_conf.default.i18n("vxe.pager.total"),[this.total]))},renderPageBtn:function(r,e){var a=this,t=this.numList,i=this.currentPage,u=this.pageCount,n=this.pagerCount,o=this.offsetNumber,s=[],p=n<u,g=p&&o+1<i,n=p&&i<u-o,l=1;return p&&(l=u-o<=i?Math.max(u-t.length+1,1):Math.max(i-o,1)),e&&g&&s.push(r("li",{class:"vxe-pager--num-btn",on:{click:function(){return a.jumpPage(1)}}},1),this.renderPrevJump(r,"li")),t.forEach(function(e,t){var n=l+t;n<=u&&s.push(r("li",{class:["vxe-pager--num-btn",{"is--active":i===n}],on:{click:function(){return a.jumpPage(n)}},key:"".concat(n).concat(Date.now())},n))}),e&&n&&s.push(this.renderNextJump(r,"li"),r("li",{class:"vxe-pager--num-btn",on:{click:function(){return a.jumpPage(u)}}},u)),s},getPageCount:function(e,t){return Math.max(Math.ceil(e/t),1)},prevPage:function(){var e=this.currentPage;1<e&&this.jumpPage(Math.max(e-1,1))},nextPage:function(){var e=this.currentPage,t=this.pageCount;e<t&&this.jumpPage(Math.min(e+1,t))},prevJump:function(){this.jumpPage(Math.max(this.currentPage-this.numList.length,1))},nextJump:function(){this.jumpPage(Math.min(this.currentPage+this.numList.length,this.pageCount))},jumpPage:function(e){e!==this.currentPage&&(this.$emit("update:currentPage",e),this.$emit("page-change",{type:"current",pageSize:this.pageSize,currentPage:e,$event:{type:"current"}}),(e=document.querySelector(".vxe-table--body-wrapper"))&&e.scrollTo(0,0))},pageSizeEvent:function(e){this.changePageSize(e)},changePageSize:function(e){var t;e!==this.pageSize&&(this.$emit("update:pageSize",e),this.$emit("page-change",{type:"size",pageSize:e,currentPage:Math.min(this.currentPage,this.getPageCount(this.total,e)),$event:{type:"size"}}),t=this.$props.id||window.location.href,localStorage.setItem("".concat(t,"_pageSize"),e))},jumpKeydownEvent:function(e){13===e.keyCode&&this.triggerJumpEvent(e)},triggerJumpEvent:function(e){var t,n=this;e.target.value&&(t=(t=_xeUtils.default.toNumber(e.target.value))<=0?1:t>=this.pageCount?this.pageCount:t,setTimeout(function(){e.target.blur(),e.target.value="",n.inputPage=""},0),this.jumpPage(t))}}};exports.default=_default2;